!function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=e("states/BattleState"),u=r(s),l=e("states/GameOverState"),c=r(l),f=e("states/WinState"),h=r(f),p=function(e){function t(){o(this,t);var e=a(this,Object.getPrototypeOf(t).call(this,800,600,Phaser.AUTO,"content",null));return e.state.add("BattleState",u["default"],!1),e.state.add("GameOverState",c["default"],!1),e.state.add("WinState",h["default"],!1),e.state.start("BattleState"),e}return i(t,e),t}(Phaser.Game);window.Game=new p},{"states/BattleState":7,"states/GameOverState":8,"states/WinState":9}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("objects/GameSprite"),l=r(u),c=function(e){function t(e,n,r,i,s){o(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,e,n,r,i,s));return u.anchor.set(.5),u.checkWorldBounds=!0,u.outOfBoundsKill=!0,u.exists=!1,u}return i(t,e),s(t,[{key:"fire",value:function(e,t,n,r){var o=arguments.length<=4||void 0===arguments[4]?0:arguments[4],a=arguments.length<=5||void 0===arguments[5]?0:arguments[5];this.reset(e,t),this.scale.set(1),this.game.physics.arcade.velocityFromAngle(n,r,this.body.velocity),this.angle=n,this.body.gravity.set(o,a)}}]),t}(l["default"]);n["default"]=c},{"objects/GameSprite":5}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("objects/GameSprite"),l=r(u),c=function(e){function t(e,n,r,i,s){o(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,e,n,r,i,s));u.maxHealth=u.health=1e4,u.game.physics.arcade.enable(u),u.setBodyDimension(128,256),u.body.collideWorldBounds=!0,u.anchor.set(.5),u.scale.setTo(.5,.5),u.game.world.addChild(u),u.game.world.sendToBack(u),u._bullets=u.game.add.group(u.game.world,"Bullet",!1,!0,Phaser.Physics.ARCADE),u.game.world.bringToTop(u._bullets);var l=new Phaser.Graphics(u.game,0,0);return u.addChild(l),u._healthBar=l,u.updateHealthBar(),u}return i(t,e),s(t,[{key:"update",value:function(){}},{key:"updateHealthBar",value:function(){var e=Phaser.Math.PI2*this.health/this.maxHealth;this._healthBar.clear(),this._healthBar.lineStyle(8,11674146),this._healthBar.arc(0,0,150,0,e,!1)}},{key:"updateHealth",value:function(e){var t=100*(1-e);t>0&&(this.damage(t),this.updateHealthBar())}},{key:"bullets",get:function(){return this._bullets}}]),t}(l["default"]);n["default"]=c},{"objects/GameSprite":5}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("objects/Enemy"),l=r(u),c=e("objects/Bullet"),f=r(c),h=function(e){function t(e,n,r,i,s){o(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,e,n,r,i,s));return u._bullets.classType=f["default"],u._bullets.createMultiple(500,"red"),u._bullets.forEach(function(e){return e.setBodyDimension(16,16)}),u.game.time.events.loop(Phaser.Timer.SECOND,u.shoot,u),u.game.time.events.loop(4*Phaser.Timer.SECOND,u.move,u),u}return i(t,e),s(t,[{key:"move",value:function(){var e=this,t=this.game.rnd.integerInRange(0,359);this.game.physics.arcade.velocityFromAngle(t,100,this.body.velocity),this.game.time.events.add(Phaser.Timer.SECOND,function(){e.body.velocity.set(0,0)},this)}},{key:"shoot",value:function(){if(this.alive)for(var e=this.game.rnd.angle(),t=0;t<18;t++){var n=this._bullets.getFirstExists(!1);n&&n.fire(this.position.x,this.position.y,e+20*t,100,0,0)}}}]),t}(l["default"]);n["default"]=h},{"objects/Bullet":2,"objects/Enemy":3}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),i(t,[{key:"setBodyDimension",value:function(e,t){e>0&&t>0&&(this.body.width=e,this.body.height=t,this.body.offset.x=(this.width-this.body.width)/2,this.body.offset.y=(this.height-this.body.height)/2)}}]),t}(Phaser.Sprite);n["default"]=s},{}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("objects/GameSprite"),l=r(u),c=function(e){function t(e,n,r){var i=arguments.length<=3||void 0===arguments[3]?"player":arguments[3],s=arguments.length<=4||void 0===arguments[4]?0:arguments[4];o(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,e,n,r,i,s));return u._slowSpeed=150,u._fastSpeed=300,u._isSlow=!1,u.game.physics.arcade.enable(u),u.setBodyDimension(6,6),u.anchor.set(.5),u.body.collideWorldBounds=!0,u.game.world.addChild(u),u._aura=new Phaser.Sprite(u.game,0,0,"aura",0),u.game.physics.arcade.enable(u._aura),u._aura.anchor.set(.5),u._aura.alpha=0,u._aura.scale.set(2,2),u.addChild(u._aura),u}return i(t,e),s(t,[{key:"update",value:function(){var e=this.game.input.keyboard.createCursorKeys();this._isSlow=this.game.input.keyboard.isDown(Phaser.Keyboard.SHIFT),this.body.velocity.set(0),e.left.isDown?this.body.velocity.x-=this.speed:e.right.isDown&&(this.body.velocity.x+=this.speed),e.up.isDown?this.body.velocity.y-=this.speed:e.down.isDown&&(this.body.velocity.y+=this.speed)}},{key:"updateAuraAlpha",value:function(e){this._aura.alpha=1-e}},{key:"speed",get:function(){return this._isSlow?this._slowSpeed:this._fastSpeed}},{key:"aura",get:function(){return this._aura}}]),t}(l["default"]);n["default"]=c},{"objects/GameSprite":5}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("objects/Player"),l=r(u),c=e("objects/Enemy"),f=(r(c),e("objects/EnemyBulletRing")),h=r(f),p=e("objects/Bullet"),y=(r(p),function(e){function t(){o(this,t);var e=a(this,Object.getPrototypeOf(t).call(this));return e._bullets=null,e._player=null,e._enemy=null,e}return i(t,e),s(t,[{key:"preload",value:function(){this.game.load.image("red","assets/red.png"),this.game.load.image("player","assets/heart.png"),this.game.load.image("aura","assets/aura.png"),this.game.load.image("enemy","assets/koraku.png")}},{key:"create",value:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this._player=new l["default"](this.game,this.game.world.centerX,this.game.world.height-200),this._enemy=new h["default"](this.game,this.game.world.centerX,this.game.world.centerY-200,"enemy",0)}},{key:"update",value:function(){this.game.physics.arcade.overlap(this._player,this._enemy.bullets,this.hitPlayerCallback,null,this),this._player.alive&&this._enemy.alive&&this.checkAuraEnemyDistance(this._player.aura,this._enemy),this._enemy.alive||this.state.start("WinState")}},{key:"hitPlayerCallback",value:function(){this.state.start("GameOverState",!0,!1,this._player.position)}},{key:"checkAuraEnemyDistance",value:function(e,t){var n=Phaser.Math.distance(e.body.center.x,e.body.center.y,t.body.center.x,t.body.center.y),r=(Math.max(e.body.width,e.body.height)+Math.max(t.body.width,t.body.height))/2,o=n>r?1:n/r;this._player.updateAuraAlpha(o),this._enemy.updateHealth(o)}}]),t}(Phaser.State));n["default"]=y},{"objects/Bullet":2,"objects/Enemy":3,"objects/EnemyBulletRing":4,"objects/Player":6}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e._text=null,e._image=null,e._playerPosition=null,e}return a(t,e),i(t,[{key:"init",value:function(e){var t={x:this.game.world.centerX,y:this.game.world.centerY};this._playerPosition=Phaser.Utils.extend(t,e)}},{key:"preload",value:function(){this.game.load.image("player","assets/heart.png"),this.game.load.image("player_broken","assets/heart_broken.png")}},{key:"create",value:function(){var e=this;this._image=this.game.add.image(this._playerPosition.x,this._playerPosition.y,"player",0),this._image.anchor.set(.5),this.game.time.events.add(Phaser.Timer.SECOND,function(){e._image.loadTexture("player_broken")},this),this.game.time.events.add(2*Phaser.Timer.SECOND,function(){e._text=e.game.add.text(32,32,"Stay Determined ...\nPress Enter to Restart",{fontSize:"32px",fill:"#FFF"});var t=e.game.input.keyboard.addKey(Phaser.KeyCode.ENTER);t.onDown.addOnce(e.restart,e)},this)}},{key:"restart",value:function(){this.game.state.start("BattleState")}}]),t}(Phaser.State);n["default"]=s},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){r(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e._text=null,e._image=null,e}return a(t,e),i(t,[{key:"preload",value:function(){this.game.load.image("win","assets/pinch.jpg")}},{key:"create",value:function(){this._text=this.game.add.text(this.game.world.centerX,this.game.world.centerY+100,"You Win!\nPress Enter to Restart",{fontSize:"32px",fill:"#FFF",align:"center"}),this._text.anchor.set(.5),this._image=this.game.add.image(this.game.world.centerX,this.game.world.centerY-100,"win",0),this._image.anchor.set(.5);var e=this.game.input.keyboard.addKey(Phaser.KeyCode.ENTER);e.onDown.addOnce(this.restart,this)}},{key:"restart",value:function(){this.game.state.start("BattleState")}}]),t}(Phaser.State);n["default"]=s},{}]},{},[1]);